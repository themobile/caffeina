<ion-view title="agenda" ng-init="init()" ng-controller="home"><ion-pane padding="true" scroll="false"><ion-slide-box show-pager="false" delegate-handle="calendar_slider" on-slide-changed="sliderchanged($index)"><!--calendar slide--><ion-slide><ion-content padding="false" scroll="false"><calendar view="date" max-view="year" min-view="date" event-service="CalendarEvents" data-prevent-default="false" class="eventCalendar"></calendar></ion-content></ion-slide><!--events for current month slide--><ion-slide><ion-content padding="false" scroll="true"><div class="row screenHeader"><div class="col screenTitle">{{currentMonthYear |date:"yyyy | MMMM" | lowercase }}<!--b.small *{{events.length}} events--></div></div><div class="row row_empty_for_balance"><div ng-if="events.length==0" class="col">no events for this month</div><div ng-if="events.length!=0" class="col">{{events.length}} events this month</div></div><ion-list style="height:80%" class="screenDetail"><!--list events, those in the clicked day are marked with isCurrent--><ion-item ng-repeat="event in events" ng-class="{isCurrent:event.isCurrent}" ng-click="viewTask(event.id)" class="listTasks"><a href="" class="item item-icon-left afterarrow"><i class="icon"><p ng-style="{'background':event.jobObject.type.color, 'color':'white','border-color':event.jobObject.type.color}" class="iconLikeFirstLetters">{{event.jobObject.type.name | firstletters}}</p></i><p class="small">{{event.date | date: 'd MMM yyyy, HH:mm'}} | {{event.jobObject.type.name}}</p><h4 ng-if="!event.jobObject.type.autoBooked"> <strong> {{event.name}} </strong> with {{event.jobObject.contact.name}}</h4><h4 ng-if="event.jobObject.type.autoBooked"> <strong> with </strong> {{event.jobObject.contact.name}}</h4></a></ion-item></ion-list></ion-content></ion-slide><!--selected event slide description--><ion-slide><ion-content padding="false" scroll="true"><div class="row screenHeader"><!--i.iconLikeFirstLetters(ng-style="{'color':selectedEvent.color, 'border-color':selectedEvent.color}") {{selectedEvent.jobObject.type | firstletters}}--><div ng-if="selectedEvent.name" class="col screenTitle">{{selectedEvent.date |date:"yyyy | MMMM dd" | lowercase }}<div class="icon ion-clock height0">&nbsp{{selectedEvent.date | date: "HH:mm"}}</div></div><div ng-if="!selectedEvent.name" class="col screenTitle">{{currentMonthYear |date:"yyyy | MMMM" | lowercase }}</div></div><div class="row row_empty_for_balance"><div ng-if="!selectedEvent.date" class="col">no event selected</div><div ng-if="selectedEvent.date &amp;&amp; !selectedEvent.jobObject.type.autoBooked" class="col"><strong>todo:</strong>&nbsp{{selectedEvent.name}}</div></div><div ng-if="selectedEvent.date"><div class="list list-smaller"><!--if job is actually a simple task--><div ng-if="selectedEvent.jobObject.type.autoBooked"><a href="#" class="item item-icon-left"><i ng-style="{'color':selectedEvent.jobObject.type.color}" class="icon ion-ios7-circle-filled"></i><strong>notes:</strong>&nbsp{{selectedEvent.jobObject.notes}}</a><a href="#" class="item item-icon-left item-icon-right"><i class="icon ion-ios7-person"></i><strong>with:</strong>&nbsp{{selectedEvent.jobObject.contact.name}}<i class="icon ion-ios7-telephone"></i></a><a ng-if="selectedEvent.jobObject.details.location.name" ng-click="golocation(selectedEvent.jobObject.details.location.geometry.location)" class="item item-icon-left item-icon-right"><i class="icon ion-map"></i>{{selectedEvent.jobObject.details.location.name}}<i class="icon ion-ios7-location"></i></a><a href="#" ng-if="selectedEvent.jobObject.details.price" class="item item-icon-left"><i class="icon ion-ios7-pricetag"></i>my price: {{selectedEvent.jobObject.details.price}}&nbspEUR</a><a href="#" ng-if="selectedEvent.jobObject.allDay" class="item item-icon-left"><i class="icon ion-ios7-clock"></i><strong>it takes all day</strong></a></div><!--if job is other than simple job--><div ng-if="!selectedEvent.jobObject.type.autoBooked"><!--if job has one task--><div ng-if="countEvents(selectedEvent.jobObject.tasks)==0"><!--task details--><a href="#" class="item item-icon-left item-icon-right"><i class="icon ion-ios7-person"></i>{{selectedEvent.jobObject.contact.name}}<i class="icon ion-ios7-telephone"></i></a><a ng-if="selectedEvent.location.name" ng-click="golocation(selectedEvent.location.geometry.location)" class="item item-icon-left item-icon-right"><i class="icon ion-map"></i>{{selectedEvent.location.name}}<i class="icon ion-ios7-location"></i></a><a href="#" ng-if="selectedEvent.notes" class="item item-icon-left"><i class="icon ion-ios7-information"></i>{{selectedEvent.notes}}</a><div ng-style="{'color':selectedEvent.jobObject.type.color}" class="item item-divider"><!-- job details--><!--a.item.item-icon-left(href='#',ng-style="{'color':selectedEvent.jobObject.type.color}")i.icon.ion-ios7-circle-filled(ng-style="{'color':selectedEvent.jobObject.type.color}")-->job type:&nbsp{{selectedEvent.jobObject.type.name}} <span ng-show='selectedEvent.jobObject.isBooked'> *** booked </span></div><a href="#" ng-if="selectedEvent.jobObject.details.price" class="item item-icon-left"><i class="icon ion-ios7-pricetag"></i>price: {{selectedEvent.jobObject.details.price}}&nbspEUR</a><a href="#" ng-if="selectedEvent.jobObject.allDay" class="item item-icon-left"><i class="icon ion-ios7-clock"></i><strong>it takes all day</strong></a><!--a.item.item-icon-left(href='#',ng-if='selectedEvent.jobObject.isBooked')--><!--    i.icon.ion-ios7-briefcase--><!--    | <strong>job is booked. yupiii!</strong>--><a href="#" ng-if="!selectedEvent.jobObject.isBooked" class="item item-icon-left afterarrow"><i class="icon ion-ios7-briefcase"></i><strong>job not booked</strong><span ng-click="bookjob()" class="item-note">Book it!</span></a><a href="#" ng-if="selectedEvent.jobObject.notes" class="item item-icon-left"><i class="icon ion-ios7-information"></i>notes: {{selectedEvent.jobObject.notes}}</a></div><!--if job has more than one task (i.e. it is booked and has more than one job)--><div ng-if="countEvents(selectedEvent.jobObject.tasks)&gt;0"><!--task details--><a href="#" class="item item-icon-left item-icon-right"><i class="icon ion-ios7-person"></i>{{selectedEvent.jobObject.contact.name}}<i class="icon ion-ios7-telephone"></i></a><a ng-if="selectedEvent.location.name" ng-click="golocation(selectedEvent.location.geometry.location)" class="item item-icon-left item-icon-right"><i class="icon ion-map"></i>{{selectedEvent.location.name}}<i class="icon ion-ios7-location"></i></a><a href="#" ng-if="selectedEvent.notes" class="item item-icon-left"><i class="icon ion-ios7-information"></i>{{selectedEvent.notes}}</a><div ng-style="{'color':selectedEvent.jobObject.type.color}" class="item item-divider"><!-- job details--><!--a.item.item-icon-left(href='#',ng-style="{'color':selectedEvent.jobObject.type.color}")i.icon.ion-ios7-circle-filled(ng-style="{'color':selectedEvent.jobObject.type.color}")-->job type:&nbsp{{selectedEvent.jobObject.type.name}} <span ng-show='selectedEvent.jobObject.isBooked'> *** booked </span></div><a href="#" class="item item-icon-left"><i class="icon ion-ios7-calendar"></i>main event: {{selectedEvent.jobObject.date | date:'yyyy | MMMM dd' | lowercase}}</a><a ng-if="selectedEvent.jobObject.details.location.name" ng-click="golocation(selectedEvent.jobObject.details.location.geometry.location)" class="item item-icon-left item-icon-right"><i class="icon ion-map"></i>{{selectedEvent.jobObject.details.location.name}}<i class="icon ion-ios7-location"></i></a><a href="#" ng-if="selectedEvent.jobObject.details.price" class="item item-icon-left"><i class="icon ion-ios7-pricetag"></i>price: {{selectedEvent.jobObject.details.price}}&nbspEUR</a><a href="#" ng-if="selectedEvent.jobObject.allDay" class="item item-icon-left"><i class="icon ion-ios7-clock"></i><strong>it takes all day</strong></a><!--a.item.item-icon-left(href='#',ng-if='selectedEvent.jobObject.isBooked')--><!--    i.icon.ion-ios7-briefcase--><!--    | <strong>job is booked. yupiii!</strong>--><a href="#" ng-if="!selectedEvent.jobObject.isBooked" class="item item-icon-left afterarrow"><i class="icon ion-ios7-briefcase"></i><strong>job not booked</strong><span class="item-note">Book it!</span></a><a href="#" ng-if="selectedEvent.jobObject.notes" class="item item-icon-left"><i class="icon ion-ios7-information"></i>notes: {{selectedEvent.jobObject.notes}}</a><div class="item item-divider">things to do for this job</div><a ng-repeat="task in selectedEvent.tasks" class="item item-icon-left"><i class="icon ion-ios7-circle-filled"></i>{{task.name}}</a></div></div></div></div></ion-content></ion-slide></ion-slide-box></ion-pane></ion-view>